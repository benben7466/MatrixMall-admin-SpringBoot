<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bzq.matrixmall.mapper.product.ProdInfoMapper">
    <!-- 根据商品ID获取详情 -->
    <select id="getProdInfoFormData" resultType="com.bzq.matrixmall.model.entity.product.ProdInfo">
        SELECT
            id,
            product_name,
            product_name_sub,
            brand_id,
            specifications,
            unit,
            expiration_date,
            producing_area,
            seo_keyword,
            seo_description
        FROM
            prod_info
        WHERE
            id = #{prodId} AND is_deleted = 0
    </select>

    <!-- 商品信息分页列表 -->
    <select id="listPageProdInfo" resultType="com.bzq.matrixmall.model.vo.product.ProdInfoVO">
        SELECT
        id,
        product_name,
        product_name_sub
        FROM
        prod_info
        <where>
            is_deleted = 0
            <if test='queryParams.keywords!=null and queryParams.keywords.trim() neq ""'>
                AND (
                product_name LIKE CONCAT('%',#{queryParams.keywords},'%')
                OR product_name_sub LIKE CONCAT('%',#{queryParams.keywords},'%')
                )
            </if>
        </where>
        ORDER BY
        create_time DESC
    </select>
</mapper>